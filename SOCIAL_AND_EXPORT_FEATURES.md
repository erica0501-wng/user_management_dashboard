# æ–°åŠŸèƒ½è¯´æ˜æ–‡æ¡£

æœ¬æ¬¡æ›´æ–°æ·»åŠ äº†ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼š**ç¤¾äº¤åŠŸèƒ½** å’Œ **å¯¼å‡ºåŠŸèƒ½**

## ğŸŒ ç¤¾äº¤åŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°
ç”¨æˆ·å¯ä»¥åˆ†äº«è‡ªå·±çš„ Watchlist ç»™å…¶ä»–ç”¨æˆ·ï¼Œå¹¶å¯¹åˆ†äº«çš„ Watchlist è¿›è¡Œè®¨è®ºå’Œç‚¹èµã€‚

### ä¸»è¦ç‰¹æ€§

#### 1. åˆ†äº« Watchlist
- **ä½ç½®**ï¼šWatchlists é¡µé¢å³ä¸Šè§’çš„ã€Œåˆ†äº«ã€æŒ‰é’®
- **æ­¥éª¤**ï¼š
  1. ç‚¹å‡»ã€Œåˆ†äº«ã€æŒ‰é’®
  2. è¾“å…¥æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰
  3. è¾“å…¥æè¿°ï¼ˆå¯é€‰ï¼‰
  4. ä»ä½ çš„ Watchlist ä¸­é€‰æ‹©è¦åˆ†äº«çš„è‚¡ç¥¨
  5. é€‰æ‹©æ˜¯å¦å…¬å¼€åˆ†äº«
  6. ç‚¹å‡»ã€Œåˆ›å»ºåˆ†äº«ã€

#### 2. ç¤¾åŒºé¡µé¢
- **ä½ç½®**ï¼šä¾§è¾¹æ çš„ "Community" é“¾æ¥
- **åŠŸèƒ½**ï¼š
  - æµè§ˆæ‰€æœ‰å…¬å¼€çš„ Watchlist åˆ†äº«
  - æœç´¢ç‰¹å®šçš„ Watchlist æˆ–ç”¨æˆ·
  - æŸ¥çœ‹è‡ªå·±çš„åˆ†äº«å†å²
  - ç‚¹èµå’Œè¯„è®ºå…¶ä»–äººçš„åˆ†äº«

#### 3. è¯¦æƒ…é¡µé¢
- ç‚¹å‡»ä»»ä½•åˆ†äº«å¡ç‰‡å³å¯æŸ¥çœ‹è¯¦æƒ…
- **åŠŸèƒ½**ï¼š
  - æŸ¥çœ‹å®Œæ•´çš„è‚¡ç¥¨åˆ—è¡¨
  - é˜…è¯»æè¿°å’ŒæŠ•èµ„ç†å¿µ
  - æ·»åŠ è¯„è®ºå‚ä¸è®¨è®º
  - ç‚¹èµæ”¯æŒ
  - æŸ¥çœ‹ç‚¹èµæ•°å’Œè¯„è®ºæ•°

#### 4. ç®¡ç†è‡ªå·±çš„åˆ†äº«
- åœ¨ã€Œæˆ‘çš„åˆ†äº«ã€æ ‡ç­¾é¡µå¯ä»¥ï¼š
  - æŸ¥çœ‹æ‰€æœ‰è‡ªå·±åˆ›å»ºçš„åˆ†äº«
  - åˆ é™¤ä¸éœ€è¦çš„åˆ†äº«
  - æŸ¥çœ‹æ¯ä¸ªåˆ†äº«çš„ç»Ÿè®¡æ•°æ®

### åç«¯ API ç«¯ç‚¹

#### Shared Watchlists
- `GET /social/shared-watchlists` - è·å–æ‰€æœ‰å…¬å¼€çš„åˆ†äº«
- `GET /social/shared-watchlists/:id` - è·å–ç‰¹å®šåˆ†äº«çš„è¯¦æƒ…
- `GET /social/my-shared-watchlists` - è·å–æˆ‘çš„åˆ†äº«
- `POST /social/shared-watchlists` - åˆ›å»ºæ–°çš„åˆ†äº«
- `PUT /social/shared-watchlists/:id` - æ›´æ–°åˆ†äº«
- `DELETE /social/shared-watchlists/:id` - åˆ é™¤åˆ†äº«

#### Comments
- `POST /social/shared-watchlists/:id/comments` - æ·»åŠ è¯„è®º
- `PUT /social/comments/:id` - æ›´æ–°è¯„è®º
- `DELETE /social/comments/:id` - åˆ é™¤è¯„è®º

#### Likes
- `POST /social/shared-watchlists/:id/like` - åˆ‡æ¢ç‚¹èµ
- `GET /social/shared-watchlists/:id/is-liked` - æ£€æŸ¥æ˜¯å¦å·²ç‚¹èµ

### æ•°æ®åº“æ¨¡å‹

```prisma
model SharedWatchlist {
  id          Int                 @id @default(autoincrement())
  ownerId     Int
  owner       User                @relation(fields: [ownerId])
  title       String
  description String?
  isPublic    Boolean             @default(true)
  symbols     String[]
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  comments    WatchlistComment[]
  likes       WatchlistLike[]
}

model WatchlistComment {
  id                Int              @id @default(autoincrement())
  sharedWatchlistId Int
  sharedWatchlist   SharedWatchlist  @relation(fields: [sharedWatchlistId])
  userId            Int
  user              User             @relation(fields: [userId])
  content           String
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
}

model WatchlistLike {
  id                Int              @id @default(autoincrement())
  sharedWatchlistId Int
  sharedWatchlist   SharedWatchlist  @relation(fields: [sharedWatchlistId])
  userId            Int
  user              User             @relation(fields: [userId])
  createdAt         DateTime         @default(now())

  @@unique([sharedWatchlistId, userId])
}
```

---

## ğŸ“¥ å¯¼å‡ºåŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°
ç”¨æˆ·å¯ä»¥å°†å„ç§æ•°æ®å¯¼å‡ºä¸º CSV æ ¼å¼ï¼Œæ–¹ä¾¿åœ¨ Excel æˆ–å…¶ä»–å·¥å…·ä¸­è¿›è¡Œåˆ†æã€‚

### å¯¼å‡ºé€‰é¡¹

#### 1. Watchlist é¡µé¢
- **ä½ç½®**ï¼šWatchlists é¡µé¢å³ä¸Šè§’çš„ã€Œå¯¼å‡º CSVã€æŒ‰é’®
- **å¯¼å‡ºå†…å®¹**ï¼š
  - è‚¡ç¥¨ä»£ç  (symbol)
  - æ·»åŠ æ—¥æœŸ (added_date)

#### 2. Portfolio é¡µé¢
- **ä½ç½®**ï¼šPortfolio é¡µé¢å³ä¸Šè§’çš„ã€Œå¯¼å‡ºæ•°æ®ã€ä¸‹æ‹‰èœå•
- **å¯¼å‡ºé€‰é¡¹**ï¼š
  1. **æŒä»“æ•°æ®** - å½“å‰æŒæœ‰çš„è‚¡ç¥¨
     - è‚¡ç¥¨ä»£ç ã€åç§°
     - æŒæœ‰æ•°é‡
     - å¹³å‡æˆæœ¬
     - æ€»æˆæœ¬
  
  2. **è®¢å•å†å²** - æ‰€æœ‰äº¤æ˜“è®¢å•
     - æ—¥æœŸã€æ—¶é—´
     - è‚¡ç¥¨ä»£ç ã€åç§°
     - ä¹°å…¥/å–å‡ºæ–¹å‘
     - æ•°é‡ã€ä»·æ ¼
     - è®¢å•ç±»å‹ã€çŠ¶æ€
  
  3. **äº¤æ˜“è®°å½•** - å……å€¼å’Œæç°è®°å½•
     - æ—¥æœŸã€æ—¶é—´
     - ç±»å‹ï¼ˆå……å€¼/æç°ï¼‰
     - é‡‘é¢
     - æ”¯ä»˜æ–¹å¼
  
  4. **è´¦æˆ·æ‘˜è¦** - è´¦æˆ·æ€»è§ˆ
     - ç”¨æˆ·åã€é‚®ç®±
     - å¯ç”¨ç°é‡‘
     - æ€»æŠ•èµ„é¢
     - è´¦æˆ·åˆ›å»ºæ—¥æœŸ
  
  5. **å®Œæ•´å¯¼å‡º** - æ‰€æœ‰æ•°æ®çš„ç»¼åˆå¯¼å‡º
     - åŒ…å«ä»¥ä¸Šæ‰€æœ‰å†…å®¹çš„å®Œæ•´æŠ¥å‘Š

### åç«¯ API ç«¯ç‚¹

- `GET /export/watchlist/csv` - å¯¼å‡º Watchlist
- `GET /export/portfolio/csv` - å¯¼å‡ºæŒä»“æ•°æ®
- `GET /export/orders/csv` - å¯¼å‡ºè®¢å•å†å²
- `GET /export/transactions/csv` - å¯¼å‡ºäº¤æ˜“è®°å½•
- `GET /export/account/csv` - å¯¼å‡ºè´¦æˆ·æ‘˜è¦
- `GET /export/all/csv` - å¯¼å‡ºæ‰€æœ‰æ•°æ®

### CSV æ ¼å¼è¯´æ˜

æ‰€æœ‰å¯¼å‡ºçš„ CSV æ–‡ä»¶éƒ½ï¼š
- ä½¿ç”¨ UTF-8 ç¼–ç 
- åŒ…å«æ ‡é¢˜è¡Œ
- è‡ªåŠ¨å¤„ç†é€—å·å’Œå¼•å·è½¬ä¹‰
- æ–‡ä»¶ååŒ…å«å¯¼å‡ºæ—¥æœŸï¼ˆå¦‚ `watchlist_2026-03-02.csv`ï¼‰

### ä½¿ç”¨åœºæ™¯

1. **æ•°æ®åˆ†æ**ï¼šå°†æ•°æ®å¯¼å…¥ Excel è¿›è¡Œæ·±åº¦åˆ†æ
2. **å¤‡ä»½**ï¼šå®šæœŸå¯¼å‡ºæ•°æ®ä½œä¸ºå¤‡ä»½
3. **æŠ¥ç¨**ï¼šå¯¼å‡ºäº¤æ˜“è®°å½•ç”¨äºç¨åŠ¡ç”³æŠ¥
4. **æŠ•èµ„ç»„åˆå›é¡¾**ï¼šåˆ†æå†å²äº¤æ˜“å’ŒæŒä»“å˜åŒ–

---

## ğŸš€ æŠ€æœ¯å®ç°

### å‰ç«¯æŠ€æœ¯æ ˆ
- React + Vite
- React Routerï¼ˆè·¯ç”±ç®¡ç†ï¼‰
- Tailwind CSSï¼ˆæ ·å¼ï¼‰
- Fetch APIï¼ˆHTTP è¯·æ±‚ï¼‰

### åç«¯æŠ€æœ¯æ ˆ
- Express.js
- Prisma ORM
- PostgreSQL
- JWT è®¤è¯

### æ–°å¢æ–‡ä»¶

#### åç«¯
- `backend/src/routes/social.js` - ç¤¾äº¤åŠŸèƒ½è·¯ç”±
- `backend/src/routes/export.js` - å¯¼å‡ºåŠŸèƒ½è·¯ç”±
- `backend/prisma/migrations/20260302082754_add_social_features/` - æ•°æ®åº“è¿ç§»

#### å‰ç«¯
- `frontend/src/pages/Community.jsx` - ç¤¾åŒºé¡µé¢
- `frontend/src/components/CreateSharedWatchlistModal.jsx` - åˆ›å»ºåˆ†äº«æ¨¡æ€æ¡†
- `frontend/src/components/SharedWatchlistDetailModal.jsx` - åˆ†äº«è¯¦æƒ…æ¨¡æ€æ¡†
- `frontend/src/services/social.js` - ç¤¾äº¤åŠŸèƒ½æœåŠ¡
- `frontend/src/services/export.js` - å¯¼å‡ºåŠŸèƒ½æœåŠ¡

### ä¿®æ”¹çš„æ–‡ä»¶

#### åç«¯
- `backend/src/app.js` - æ³¨å†Œæ–°è·¯ç”±
- `backend/prisma/schema.prisma` - æ·»åŠ æ–°æ¨¡å‹

#### å‰ç«¯
- `frontend/src/App.jsx` - æ·»åŠ  Community è·¯ç”±
- `frontend/src/components/Sidebar.jsx` - æ·»åŠ ç¤¾åŒºé“¾æ¥
- `frontend/src/pages/Watchlists.jsx` - æ·»åŠ åˆ†äº«å’Œå¯¼å‡ºæŒ‰é’®
- `frontend/src/pages/Portfolio.jsx` - æ·»åŠ å¯¼å‡ºèœå•

---

## ğŸ“ ä½¿ç”¨æç¤º

### ç¤¾äº¤åŠŸèƒ½
1. **åˆ†äº«å‰å‡†å¤‡**ï¼šç¡®ä¿ä½ çš„ Watchlist è‡³å°‘æœ‰ä¸€ä¸ªè‚¡ç¥¨
2. **å†™å¥½æè¿°**ï¼šåˆ†äº«æ—¶æ·»åŠ ä½ çš„æŠ•èµ„ç†å¿µï¼Œå¯ä»¥å¸å¼•æ›´å¤šè®¨è®º
3. **å‚ä¸è®¨è®º**ï¼šåœ¨ç¤¾åŒºä¸­ç§¯æè¯„è®ºå’Œç‚¹èµï¼Œå»ºç«‹æŠ•èµ„è€…ç½‘ç»œ
4. **ä¿æŠ¤éšç§**ï¼šæ•æ„Ÿçš„ Watchlist å¯ä»¥è®¾ç½®ä¸ºç§å¯†

### å¯¼å‡ºåŠŸèƒ½
1. **å®šæœŸå¯¼å‡º**ï¼šå»ºè®®æ¯æœˆå¯¼å‡ºä¸€æ¬¡æ•°æ®ä½œä¸ºè®°å½•
2. **Excel åˆ†æ**ï¼šå¯¼å‡ºçš„ CSV å¯ä»¥ç›´æ¥åœ¨ Excel ä¸­æ‰“å¼€åˆ†æ
3. **å®Œæ•´å¤‡ä»½**ï¼šä½¿ç”¨ã€Œå®Œæ•´å¯¼å‡ºã€é€‰é¡¹å®šæœŸå¤‡ä»½æ‰€æœ‰æ•°æ®
4. **ä¸“ä¸šç”¨æˆ·**ï¼šè®¢å•å’Œäº¤æ˜“è®°å½•å¯¹æŠ•èµ„ç»„åˆåˆ†æå¾ˆæœ‰å¸®åŠ©

---

## ğŸ”’ æƒé™å’Œå®‰å…¨

### ç¤¾äº¤åŠŸèƒ½
- åªæœ‰ç™»å½•ç”¨æˆ·å¯ä»¥åˆ›å»ºåˆ†äº«
- åªæœ‰åˆ†äº«çš„æ‰€æœ‰è€…å¯ä»¥ç¼–è¾‘å’Œåˆ é™¤
- ç§å¯†åˆ†äº«åªæœ‰æ‰€æœ‰è€…å¯ä»¥æŸ¥çœ‹
- æ‰€æœ‰è¯„è®ºéƒ½ä¼šè®°å½•ç”¨æˆ·ä¿¡æ¯

### å¯¼å‡ºåŠŸèƒ½
- éœ€è¦ç™»å½•è®¤è¯
- åªèƒ½å¯¼å‡ºè‡ªå·±çš„æ•°æ®
- ä½¿ç”¨ JWT token éªŒè¯èº«ä»½
- æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡æˆæƒæ£€æŸ¥

---

## ğŸ¯ æœªæ¥æ‰©å±•

### å¯èƒ½çš„å¢å¼ºåŠŸèƒ½
1. **ç¤¾äº¤åŠŸèƒ½**ï¼š
   - å…³æ³¨å…¶ä»–ç”¨æˆ·
   - ç§ä¿¡åŠŸèƒ½
   - åˆ†äº«çš„è®¢é˜…é€šçŸ¥
   - çƒ­é—¨åˆ†äº«æ’è¡Œæ¦œ

2. **å¯¼å‡ºåŠŸèƒ½**ï¼š
   - Excel (.xlsx) æ ¼å¼æ”¯æŒ
   - PDF æŠ¥å‘Šç”Ÿæˆ
   - è‡ªå®šä¹‰å­—æ®µé€‰æ‹©
   - å®šæœŸè‡ªåŠ¨å¯¼å‡º

3. **æ•°æ®åˆ†æ**ï¼š
   - å†…ç½®å›¾è¡¨å’Œç»Ÿè®¡
   - æŠ•èµ„ç»„åˆæ€§èƒ½åˆ†æ
   - ç¤¾åŒºçƒ­é—¨è‚¡ç¥¨åˆ†æ
   - AI æŠ•èµ„å»ºè®®

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
2. åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
3. æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
4. JWT token æ˜¯å¦æœ‰æ•ˆ

---

**æ›´æ–°æ—¥æœŸ**: 2026-03-02
**ç‰ˆæœ¬**: 2.0.0
